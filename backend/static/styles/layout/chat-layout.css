/**
 * Chat Application Layout
 * Four-column flexbox structure: Project Sidebar | Main Content | Sources Panel | Outline Builder
 */

/* Main app container with multi-column layout */
.app-container {
    display: flex;
    height: 100vh;
    width: 100%;
    position: relative;
}

/* Project sidebar - left */
#project-sidebar {
    display: none;
    width: 200px;
    min-width: 200px;
    background: var(--card);
    border-right: 1px solid var(--border);
    overflow-y: auto;
    flex-shrink: 0;
    transition: transform 0.3s ease;
}

#project-sidebar.visible {
    display: block;
}

#project-sidebar.collapsed {
    width: 50px;
    min-width: 50px;
    overflow-x: hidden;
}

#outline-builder.collapsed {
    width: 50px;
    min-width: 50px;
    max-width: 50px;
    overflow-x: hidden;
}

/* Main content area - center */
#main-content {
    flex: 1;
    display: flex;
    flex-direction: column;
    overflow: hidden;
    min-width: 0;
}

/* Sources panel - middle-right */
#sources-panel {
    display: none;  /* Hidden by default when user not authenticated */
    width: 300px;
    min-width: 300px;
    max-width: 300px;
    background: var(--card);
    border-left: 1px solid var(--border);
    overflow-y: auto;
    flex-shrink: 0;
    transition: transform 0.3s ease;
    position: relative;
}

/* Show sources panel when user is authenticated */
#sources-panel.visible {
    display: block;
}

/* Outline builder - right sidebar */
#outline-builder {
    display: none;  /* Hidden by default when user not authenticated */
    width: 320px;
    min-width: 320px;
    max-width: 320px;
    background: var(--card);
    border-left: 1px solid var(--border);
    overflow-y: auto;
    flex-shrink: 0;
    transition: transform 0.3s ease;
    position: relative;
}

/* Show outline when user is authenticated and has content */
#outline-builder.visible {
    display: block;
}

/* Keep .active class for compatibility */
#outline-builder.active {
    display: block;
}

/* Laptop screens - hide project sidebar, keep outline beside chat */
@media (max-width: 1400px) {
    #project-sidebar {
        position: fixed;
        top: 0;
        left: 0;
        bottom: 0;
        z-index: 1000;
        transform: translateX(-100%);
        box-shadow: var(--shadow-lg);
    }
    
    #project-sidebar.visible {
        transform: translateX(0);
    }
}

/* Large laptop screens - hide sources panel for now, keep outline */
@media (max-width: 1600px) {
    #sources-panel {
        position: fixed;
        top: 0;
        right: 320px;  /* Offset by outline width */
        bottom: 0;
        z-index: 999;
        transform: translateX(100%);
        box-shadow: var(--shadow-lg);
    }
    
    #sources-panel.visible {
        transform: translateX(0);
    }
}

/* Tablet screens - make both sources and outline slide-over panels */
@media (max-width: 1024px) {
    #sources-panel {
        right: 0;  /* Full right alignment on tablet */
    }
    
    #outline-builder {
        position: fixed;
        top: 0;
        right: 0;
        bottom: 0;
        z-index: 1000;
        transform: translateX(100%);
        box-shadow: var(--shadow-lg);
    }
    
    #outline-builder.visible {
        transform: translateX(0);
    }
}

/* Mobile - full width panels */
@media (max-width: 640px) {
    #project-sidebar,
    #sources-panel,
    #outline-builder {
        width: 100%;
        max-width: 100%;
    }
}

/* Dark mode */
body.dark-mode #project-sidebar,
body.dark-mode #sources-panel,
body.dark-mode #outline-builder {
    background: var(--card);
    border-color: rgba(255, 255, 255, 0.1);
}
