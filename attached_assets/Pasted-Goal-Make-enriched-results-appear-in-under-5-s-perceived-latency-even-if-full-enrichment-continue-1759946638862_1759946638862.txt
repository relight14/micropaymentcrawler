Goal

Make enriched results appear in under ~5 s perceived latency, even if full enrichment continues in the background.

Weâ€™ll keep the backend caching system as-is (since itâ€™s working perfectly), and optimize how the frontend fetches and displays enrichment updates.

ğŸ§© Root of the Latency

Right now:

Frontend starts polling every ~1â€“2 s.

Stops after 10 tries (~15 s).

Backend enrichment often finishes at 16â€“18 s (especially when Tollbit or Claude calls chain).

Result: backend finishes, but UI already timed out.

So the fix is not to make users wait longer â€” itâ€™s to show progressive enrichment smarter.

ğŸš€ The Right Fix: Two-Stage Update Flow

You can solve this in a way that makes the app feel instant without actually reducing total enrichment time.

Stage 1: Quick Partial Refresh (~1â€“3 s)

As soon as the backend starts enrichment, return a lightweight â€œstub enrichmentâ€ response containing:

Basic metadata (titles, domains)

Placeholder unlock_price = 0

enrichment_status: "processing"

Display those cards immediately (you already do this).

Stage 2: Progressive Enrichment Push

While enrichment runs, update each source individually as results come in, rather than waiting for all 15.

âœ… Option A (Best): Switch from polling â†’ Server-Sent Events (SSE)

This gives you real-time updates with minimal backend change.

Backend (FastAPI):

@app.get("/research/enrichment-stream/{cache_key}")
async def enrichment_stream(cache_key: str):
    async def event_generator():
        async for update in enrichment_service.stream_updates(cache_key):
            yield f"data: {json.dumps(update)}\n\n"
    return EventSourceResponse(event_generator())


Frontend:

const eventSource = new EventSource(`/research/enrichment-stream/${cacheKey}`);
eventSource.onmessage = e => {
  const update = JSON.parse(e.data);
  updateCard(update.source_id, update.unlock_price, update.licensing_protocol);
};


SSE keeps a single open connection â€” no repeated polling.

Each source update instantly hits the UI.

Users see cards flip from â€œFREE DISCOVERYâ€ â†’ â€œâš¡ Tollbit $0.04â€ as enrichment completes.