Design Goal

Turn the â€œaha momentâ€ in the chat â€” when the userâ€™s question becomes clearly research-oriented â€” into a seamless transition to the research tab.

We want:

Zero extra friction (no forced rerouting)

One gentle prompt per topic

Context continuity â€” chat â†’ research shares the same topic

ğŸ§© Implementation Plan (Refined)
1. Detection Layer (LLM + heuristic hybrid)

Keep it cheap and robust.

Option A â€” prompt-based (Claude logic only):
You can add this to the conversational system prompt:

If the userâ€™s messages reveal a clear, researchable topic 
(e.g. a current event, policy issue, historical question, 
scientific topic, or hypothesis), respond naturally with 
a friendly invitation like:

"That's a great topic â€” would you like me to find credible sources so we can dig deeper?"

Then set `suggest_research: true` in your response metadata.


Option B â€” add a fallback heuristic in Python:

if message.intent in ["academic_causal", "policy_analysis", "news_event"] and \
   message.confidence > 0.7 and not conversation.has_research_suggestion:
    message.suggest_research = True


So even if the model forgets, the backend can still fire the suggestion once.

2. Response Schema

Add the field to your unified chat message object:

{
  "role": "assistant",
  "content": "That's a fascinating topic â€” want to find some sources?",
  "suggest_research": true,
  "topic_hint": "Gaza peace deal negotiations"
}


The topic_hint lets you auto-fill the search bar when switching.

3. Frontend UI (MessageRenderer)

Enhance your message component:

if (message.suggest_research) {
  const btn = document.createElement('button');
  btn.className = 'switch-mode-btn';
  btn.innerText = 'Switch to Research Mode';
  btn.onclick = () => {
    switchToResearchTab();
    prefillResearchQuery(message.topic_hint);
  };
  messageBody.appendChild(btn);
}


Styling: small inline CTA below the AI message (neutral gray with hover color).

4. State & Frequency Control

In your appState:

if (!state.researchSuggestionShown) {
  renderResearchButton();
  state.researchSuggestionShown = true;
}


Resets when a new conversation starts.

5. Optional â€” â€œSmart Switchâ€ Flow

On click:

Switch tab â†’ /research

Auto-populate the search box with the summarized topic

Focus the â€œFind Sourcesâ€ button
(donâ€™t auto-run the search â€” let the user press it)

That preserves agency while still feeling responsive.

ğŸ§  Example in Practice

User: â€œIâ€™m trying to understand the Gaza peace deal that was announced today â€” whatâ€™s actually in it?â€
Assistant:
â€œThatâ€™s a really interesting and timely question. Want to find some credible sources and see how different outlets are covering it?â€
ğŸ‘‰ [Switch to Research Mode]

When clicked:

Tab changes

Search box: â€œGaza peace deal 2025 terms and reactionsâ€

User sees context continuity â†’ immediate trust.

âš™ï¸ Rollout Plan
Step	Scope	ETA
Backend flag + prompt update	conversational.py	0.5 day
API schema update	responses.py	0.25 day
Frontend button logic	message-renderer.js / app.js	0.5 day
Style + QA	CSS + test	0.25 day

Total: ~1â€“1.5 dev days.
No migration or DB impact.

âœ… Why This Works

Feels human â€” not algorithmic or interruptive.

Uses existing architecture (Claude + message metadata).

Keeps cost at zero (no new model calls).

Bridges discovery â†’ research naturally.